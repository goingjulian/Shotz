(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(43)},32:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(20),c=n.n(o),s=n(4),u=(n(32),n(5)),i=n(6),l=n(8),m=n(7),E=n(9),d=n(1),p=n.n(d),f=n(3),h={API_URL:"http://51.75.74.95:3000",WS_URL:"ws://51.75.74.95:3000"},v={SET_TEAMS:"SET_TEAMS",ACCEPT_TEAM:"ACCEPT_TEAM",REJECT_TEAM:"REJECT_TEAM",CLEAR_REJECTED:"CLEAR_REJECTED",REMOVE_TEAMS:"REMOVE_TEAMS",ADD_ANSWER:"ADD_ANSWER",ANSWER_CORRECT:"ANSWER_CORRECT",ANSWER_INCORRECT:"ANSWER_INCORRECT"};function b(e){return{type:v.SET_TEAMS,teamList:e}}function R(e){return{type:v.ACCEPT_TEAM,sessionId:e}}function w(e){return{type:v.REJECT_TEAM,sessionId:e}}function O(e,t,n){return function(r){var a={method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({accepted:n})};fetch("".concat(h.API_URL,"/room/").concat(e,"/team/").concat(t,"/status"),a).then(function(){var e=Object(f.a)(p.a.mark(function e(a){var o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:if(o=e.sent,!a.ok){e.next=7;break}r(n?R(t):w(t)),e.next=8;break;case 7:throw new Error(o.error);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return r(M(e.message))})}}var g=0;function C(){return console.log("WS: Connecting to websocket"),function(){var e=Object(f.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new WebSocket("".concat(h.WS_URL,"/ws"));case 2:(n=e.sent).onopen=function(){console.log("WS: Websocket connected"),g=0},n.onmessage=function(e){var n=JSON.parse(e.data);t(y(n))},n.onclose=function(){console.log("WS: Websocket disconnected"),g<3&&pe.getState().views.wsAllowed?(console.log("WS: Trying to reconnect websocket"),g++,setTimeout(function(){t(C())},5e3)):console.log("WS: Websocket connection could not be restored")};case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}function y(e){return console.log(e),function(t){switch(e.type){case"quizmaster_newTeam":t(function(e){return function(t){fetch("".concat(h.API_URL,"/room/").concat(e,"/teams"),{method:"GET",credentials:"include"}).then(function(){var e=Object(f.a)(p.a.mark(function e(n){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:if(r=e.sent,!n.ok){e.next=7;break}t(b(r)),e.next=8;break;case 7:throw new Error(r.error);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return t(M(e.message))})}}(pe.getState().room.roomKey));break;case"quizmaster_teamLeft":t(w(e.sessionId));break;case"quizmaster_answerSubmitted":t((n=e.teamSessionId,r=e.questionId,a=e.answer,{type:v.ADD_ANSWER,teamSessionId:n,questionId:r,answer:a}));break;default:console.log("Unknown message: ",e)}var n,r,a}}var _={VIEW_LOBBY_SCREEN:"VIEW_LOBBY_SCREEN",VIEW_LOGIN_SCREEN:"VIEW_LOGIN_SCREEN",VIEW_CATEGORYSELECTION_SCREEN:"VIEW_CATEGORYSELECTION_SCREEN",VIEW_CPANEL_SCREEN:"VIEW_CPANEL_SCREEN",VIEW_END_ROUND_SCREEN:"VIEW_END_ROUND_SCREEN"};function A(){return{type:_.VIEW_LOGIN_SCREEN}}function S(){return{type:_.VIEW_LOBBY_SCREEN}}function T(){return{type:_.VIEW_CATEGORYSELECTION_SCREEN}}function k(){return{type:_.VIEW_CPANEL_SCREEN}}function N(){return{type:_.VIEW_END_ROUND_SCREEN}}function x(e){return function(t){fetch("".concat(h.API_URL,"/room/").concat(e,"/round/select-category"),{method:"PUT",credentials:"include"}).then(function(){var e=Object(f.a)(p.a.mark(function e(n){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:if(r=e.sent,!n.ok){e.next=7;break}t(T()),e.next=8;break;case 7:throw new Error(r.error);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return t(M(e.message))})}}function I(e){return function(t){switch(e){case"REGISTER":t(S());break;case"CATEGORY_SELECT":t(T());break;case"IN_ROUND":case"SUBMIT_CLOSED":t(k());break;case"END_ROUND":t(N());break;default:t(A())}}}var j={startRound:"startRound",setRounds:"setRounds",nextQuestion:"nextQuestion",setQuestions:"setQuestions",revealAnswer:"revealAnswer"};function L(e,t){return{type:j.setRounds,rounds:e,currentQuestionIndex:t}}var Q={CREATE_ROOM:"CREATE_ROOM",LEAVE_ROOM:"LEAVE_ROOM",ADD_ERROR:"ADD_ERROR",REMOVE_ERROR:"REMOVE_ERROR"};function M(e){return{type:Q.ADD_ERROR,error:e}}function D(e){return{type:Q.CREATE_ROOM,roomKey:e}}n(35);var V=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(i.a)(t,[{key:"getError",value:function(){var e=this;return""!==this.props.error&&a.a.createElement("div",{className:"Error"},a.a.createElement("h2",null,this.props.error),a.a.createElement("button",{onClick:function(){return e.props.removeError(e.props.error)}},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"}))))}},{key:"render",value:function(){return this.getError()}}]),t}(a.a.Component);var W=s.b(function(e){return{error:e.room.error}},function(e){return{removeError:function(t){return e(function(e){return{type:Q.REMOVE_ERROR,error:e}}(t))}}})(V);var K=s.b(function(e){return{activeView:e.views.activeView}})(function(e){return a.a.createElement("div",{className:"App"},a.a.createElement(e.activeView,null),a.a.createElement(W,null))}),P=n(22),U=n(10),q=n(2);n(36);var G=s.b(function(e){return{}},function(e){return{createRoom:function(){return e(function(e){fetch("".concat(h.API_URL,"/room"),{method:"POST",credentials:"include"}).then(function(){var t=Object(f.a)(p.a.mark(function t(n){var r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:if(r=t.sent,!n.ok){t.next=9;break}e(D(r.roomKey)),e(S()),e(C()),t.next=10;break;case 9:throw new Error(r.error);case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){return e(M(t.message))})})}}})(function(e){return a.a.createElement("div",{className:"Component Login"},a.a.createElement("nav",null,a.a.createElement("div",{className:"navInner"},a.a.createElement("div",{className:"navMiddle"},a.a.createElement("h2",null,"Quizmaster")))),a.a.createElement("main",null,a.a.createElement("h1",null,"Shotz: Quizmaster"),a.a.createElement("div",{className:"startContainer"},a.a.createElement("button",{className:"bttn createRoomBttn",onClick:e.createRoom},"Create a new room!"),a.a.createElement("a",{href:"/"},"or join a game!"))))});n(37),n(38);function Y(e){return a.a.createElement("div",{className:e.itemClass+" Item"},void 0!==e.index&&a.a.createElement("span",{className:"itemIndex"},e.index,"."),void 0!==e.text&&a.a.createElement("div",{className:"itemTextHolder"},a.a.createElement("span",{className:"itemText"},e.text),void 0!==e.team&&a.a.createElement("span",{className:"itemTeam"},e.team)),a.a.createElement("div",{className:"itemButtonsHolder"},void 0!==e.acceptHandler&&a.a.createElement("span",{className:"itemButtonHolder"},a.a.createElement("button",{className:"itemButton__accept",onClick:e.acceptHandler},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"})))),void 0!==e.closeHandler&&a.a.createElement("span",{className:"itemButtonHolder"},a.a.createElement("button",{className:"itemButton__close",onClick:e.closeHandler},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"}))))))}n(39);var B=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(i.a)(t,[{key:"leaveRoom",value:function(e){e?this.props.leaveRoom(e):this.props.viewLoginScreenAction()}},{key:"render",value:function(){var e=this;return a.a.createElement("nav",null,a.a.createElement("div",{className:"navInner"},a.a.createElement("div",{className:"navLeft"},a.a.createElement("button",{onClick:function(){return e.leaveRoom(e.props.roomKey)}},"End game")),null!==this.props.roomKey&&a.a.createElement("div",{className:"navMiddle"},a.a.createElement("span",null,"Room: ",this.props.roomKey))))}}]),t}(a.a.Component);var H=s.b(function(e){return{roomKey:e.room.roomKey}},function(e){return{leaveRoom:function(t){return e(function(e){return function(t){fetch("".concat(h.API_URL,"/room/").concat(e),{method:"DELETE",credentials:"include"}).then(function(){var e=Object(f.a)(p.a.mark(function e(n){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:if(r=e.sent,!n.ok){e.next=9;break}t({type:Q.LEAVE_ROOM}),t({type:v.REMOVE_TEAMS}),t(A()),e.next=10;break;case 9:throw new Error(r.error);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return t(M(e.message))})}}(t))},viewLoginScreenAction:function(){return e(A())}}})(B),J=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(i.a)(t,[{key:"getItemClass",value:function(e){return e?"lobbyTeamListItem accepted":"lobbyTeamListItem"}},{key:"startGame",value:function(){this.props.clearRejectedTeams(this.props.roomKey),this.props.setCategorySelectState(this.props.roomKey)}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"Component Lobby"},a.a.createElement(H,null),a.a.createElement("main",null,a.a.createElement("h1",null,this.props.teamList.length," teams joined:"),a.a.createElement("div",{className:"lobbyTeamList"},this.props.teamList.map(function(t,n){return a.a.createElement(Y,{key:n+1,index:n+1,text:t.teamName,acceptHandler:function(){return e.props.acceptTeamAction(e.props.roomKey,t.sessionId)},closeHandler:function(){return e.props.rejectTeamAction(e.props.roomKey,t.sessionId)},itemClass:e.getItemClass(t.accepted)})}),this.props.teamList.length<1&&a.a.createElement("span",{className:"lobbyTeamListNoTeams"},"There are no teams!")),a.a.createElement("div",{className:"lobbyStartQuizContainer"},this.props.teamList.filter(function(e){return e.accepted}).length>=2&&a.a.createElement("button",{className:"bttn",onClick:function(){return e.startGame()}},"Start quiz"))))}}]),t}(a.a.Component);var z=s.b(function(e){return{teamList:e.teams.teamList,roomKey:e.room.roomKey}},function(e){return{acceptTeamAction:function(t,n){return e(O(t,n,!0))},rejectTeamAction:function(t,n){return e(O(t,n,!1))},clearRejectedTeams:function(t){return e(function(e){return function(t){fetch("".concat(h.API_URL,"/room/").concat(e,"/teams"),{method:"DELETE",credentials:"include"}).then(function(){var e=Object(f.a)(p.a.mark(function e(n){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:if(r=e.sent,!n.ok){e.next=7;break}t(b(r)),e.next=8;break;case 7:throw new Error(r.error);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return t(M(e.message))})}}(t))},setCategorySelectState:function(t){return e(x(t))}}})(J),F={SET_CATEGORY:"SET_CATEGORY",ADD_CATEGORY:"ADD_CATEGORY",REMOVE_CATEGORY:"REMOVE_CATEGORY",EMPTY_SELECTED_CATEGORIES:"EMPTY_SELECTED_CATEGORIES"};n(40);var Z=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={error:null},n}return Object(E.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.categories.length<1&&this.props.getAllCategories()}},{key:"getNoneSelectedItems",value:function(e,t){return e.filter(function(e){return!t.includes(e)})}},{key:"addCategory",value:function(e){this.props.selectedCategories.length<3&&this.props.addCategory(e)}},{key:"startRound",value:function(){this.props.startRound(this.props.roomKey,this.props.selectedCategories),this.props.emptySelectedCategoriesAction()}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"Component CategorySelection categorySelect"},a.a.createElement(H,null),a.a.createElement("main",null,a.a.createElement("div",{className:"categories"},a.a.createElement("h2",null,"Categories"),a.a.createElement("p",null,"Select at least 1 and max. 3 categories."),a.a.createElement("ul",null,this.getNoneSelectedItems(this.props.categories,this.props.selectedCategories).map(function(t,n){var r=3===e.props.selectedCategories.length?"disabled":"";return a.a.createElement("li",{className:r,key:n,onClick:function(){return e.addCategory(t)}},t)}))),a.a.createElement("div",{className:"categories"},a.a.createElement("h2",null,"Selected categories:"),a.a.createElement("ul",null,this.props.selectedCategories.map(function(t,n){return a.a.createElement("li",{key:n,onClick:function(){return e.props.removeCategory(t)}},t)}))),this.props.selectedCategories.length>0&&a.a.createElement("button",{className:"bttn",onClick:function(){return e.startRound()}},"Start round")))}}]),t}(a.a.Component);var X=s.b(function(e){return{roomKey:e.room.roomKey,categories:e.questions.categories,selectedCategories:e.questions.selectedCategories}},function(e){return{emptySelectedCategoriesAction:function(){return e({type:F.EMPTY_SELECTED_CATEGORIES})},getAllCategories:function(){return e(function(e){fetch("".concat(h.API_URL,"/room/categories"),{method:"GET",credentials:"include"}).then(function(){var t=Object(f.a)(p.a.mark(function t(n){var r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:if(r=t.sent,!n.ok){t.next=7;break}e((a=r,{type:F.SET_CATEGORY,categories:a})),t.next=8;break;case 7:throw new Error(r.error);case 8:case"end":return t.stop()}var a},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){return e(M(t.message))})})},startRound:function(t,n){return e(function(e,t){return function(n){var r={method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({categories:t})};fetch("".concat(h.API_URL,"/room/").concat(e,"/round/start"),r).then(function(){var e=Object(f.a)(p.a.mark(function e(t){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(r=e.sent,!t.ok){e.next=8;break}n(L(r.rounds,r.currentQuestionIndex)),n(k()),e.next=9;break;case 8:throw new Error(r.error);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return n(M(e.message))})}}(t,n))},addCategory:function(t){return e(function(e){return{type:F.ADD_CATEGORY,category:e}}(t))},removeCategory:function(t){return e(function(e){return{type:F.REMOVE_CATEGORY,category:e}}(t))}}})(Z),$=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(i.a)(t,[{key:"handleAnswerStatus",value:function(e,t,n){this.props.setAnswerStatus(this.props.roomKey,e,t,n)}},{key:"render",value:function(){var e=this,t=this.props.currentRound.questions[this.props.activeQuestionIndex],n=this.props.currentRound.questions.length,r=t.question,o=this.props.currentRound.questions[this.props.activeQuestionIndex].answer,c=[];return this.props.teamList.forEach(function(n){var r,o=n.answers.find(function(e){return e.questionId===t._id});o&&(o.correct?r="correct":!1===o.correct&&(r="incorrect"),c.push(a.a.createElement(Y,{key:n.teamName,text:o.answer,team:n.teamName,itemClass:"itemAnswer ".concat(r),closeHandler:function(){e.props.setAnswerStatus(e.props.roomKey,o.questionId,n.sessionId,!1)},acceptHandler:function(){e.props.setAnswerStatus(e.props.roomKey,o.questionId,n.sessionId,!0)}})))}),a.a.createElement("div",{className:"QuestionInfo"},a.a.createElement("div",{className:"infoActions"},this.props.answerRevealed?null:a.a.createElement("button",{className:"bttn",onClick:function(){return e.props.revealAnswer(e.props.roomKey)}},"Show answer to teams"),a.a.createElement("h2",null,"Round ",this.props.rounds.length),n===this.props.activeQuestionIndex+1?a.a.createElement("button",{className:"bttn",onClick:function(){return e.props.endRound(e.props.roomKey)}},"End round"):a.a.createElement("button",{className:"bttn",onClick:function(){return e.props.nextQuestion(e.props.roomKey)}},"Next question")),a.a.createElement("div",{className:"infoQuestion"},a.a.createElement("h2",null,"Question ",this.props.activeQuestionIndex+1,"/",n,":",a.a.createElement("span",null," ",r)),a.a.createElement("h2",null,"Answer: ",a.a.createElement("span",null,o)),a.a.createElement("h2",null,"Answers (",c.length,"/",this.props.teamList.length,"):"),a.a.createElement("div",{className:"infoAnswersList"},c)))}}]),t}(a.a.Component);var ee=s.b(function(e){return{roomKey:e.room.roomKey,rounds:e.rounds.rounds,activeQuestionIndex:e.rounds.rounds[e.rounds.rounds.length-1].activeQuestionIndex,currentRound:e.rounds.rounds[e.rounds.rounds.length-1],teamList:e.teams.teamList,answerRevealed:e.rounds.answerRevealed}},function(e){return{nextQuestion:function(t){return e(function(e){return function(t){fetch("".concat(h.API_URL,"/room/").concat(e,"/round/question/next"),{method:"PUT",credentials:"include"}).then(function(){var e=Object(f.a)(p.a.mark(function e(n){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:if(r=e.sent,!n.ok){e.next=7;break}t((a=r.activeQuestionIndex,{type:j.nextQuestion,activeQuestionIndex:a})),e.next=8;break;case 7:throw new Error(r.error);case 8:case"end":return e.stop()}var a},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return t(M(e.message))})}}(t))},setAnswerStatus:function(t,n,r,a){return e(function(e,t,n,r){return function(a){var o={method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({correct:r})};fetch("".concat(h.API_URL,"/room/").concat(e,"/round/question/").concat(t,"/answer/").concat(n),o).then(function(){var e=Object(f.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,!t.ok){e.next=7;break}a(b(n)),e.next=8;break;case 7:throw new Error(n.error);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return a(M(e.message))})}}(t,n,r,a))},endRound:function(t){return e(function(e){return function(t){fetch("".concat(h.API_URL,"/room/").concat(e,"/round/end"),{method:"PUT",credentials:"include"}).then(function(){var e=Object(f.a)(p.a.mark(function e(n){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:if(r=e.sent,!n.ok){e.next=7;break}t(N()),e.next=8;break;case 7:throw new Error(r.error);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return t(M(e.message))})}}(t))},revealAnswer:function(t){return e(function(e){return function(){var t=Object(f.a)(p.a.mark(function t(n){var r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r={method:"PUT",credentials:"include"},fetch("".concat(h.API_URL,"/room/").concat(e,"/round/question/reveal"),r).then(function(){var e=Object(f.a)(p.a.mark(function e(t){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(r=e.sent,!t.ok){e.next=7;break}n({type:j.revealAnswer}),e.next=8;break;case 7:throw new Error(r.error);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return n(M(e.message))});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}(t))}}})($);function te(e){var t=e.questions.map(function(t,n){var r="";return n===e.currentQuestionIndex?r="current":n<e.currentQuestionIndex&&(r="greyedOut"),n>e.currentQuestionIndex?a.a.createElement(Y,{key:n,index:n+1,text:t.question,itemClass:r,closeHandler:function(){return e.removeQuestionFromQueue(t._id)}}):a.a.createElement(Y,{key:n,index:n+1,text:t.question,itemClass:r})}),n=e.toggled?"disabled":"";return a.a.createElement("div",{className:"QuestionQueue "+n},a.a.createElement("header",null,a.a.createElement("h1",null,"Question Queue")),a.a.createElement("main",null,t))}function ne(e){var t=e.teams.slice().sort(function(e,t){return e.score>t.score?-1:e.score<t.score?1:0}).map(function(t,n){return e.teams.length>2?a.a.createElement(Y,{key:n,index:n+1,text:"".concat(t.teamName," (").concat(t.score," pts)"),closeHandler:function(){e.removeTeam(t.sessionId)}}):a.a.createElement(Y,{key:n,index:n+1,text:"".concat(t.teamName," (").concat(t.score," pts)")})}),n=e.toggled?"disabled":"";return a.a.createElement("div",{className:"Scoreboard "+n},a.a.createElement("header",null,a.a.createElement("h1",null,"Scoreboard")),a.a.createElement("main",null,t))}n(41);var re=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={showScoreboard:!0,showQueue:!0},n}return Object(E.a)(t,e),Object(i.a)(t,[{key:"toggleScoreboard",value:function(){var e=this.state.showScoreboard;this.setState({showScoreboard:!e})}},{key:"toggleQueue",value:function(){var e=this.state.showQueue;this.setState({showQueue:!e})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"Component"},a.a.createElement(H,null),a.a.createElement("nav",{className:"navigationMobile"},a.a.createElement("div",{className:"toggleScoreboard",onClick:function(){return e.toggleScoreboard()}},a.a.createElement("span",null,"Scores")),a.a.createElement("div",{className:"toggleQueue",onClick:function(){return e.toggleQueue()}},a.a.createElement("span",null,"Queue"))),a.a.createElement("div",{className:"ControlPanel"},a.a.createElement(ne,{toggled:this.state.showScoreboard,teams:this.props.teams,removeTeam:function(t){return e.props.removeTeam(e.props.roomKey,t)}}),a.a.createElement(ee,null),a.a.createElement(te,{toggled:this.state.showQueue,questions:this.props.rounds[this.props.rounds.length-1].questions,currentQuestionIndex:this.props.rounds[this.props.rounds.length-1].activeQuestionIndex,removeQuestionFromQueue:function(t){return e.props.removeQuestionFromQueue(e.props.roomKey,t)}})))}}]),t}(a.a.Component);var ae=s.b(function(e){return{roomKey:e.room.roomKey,rounds:e.rounds.rounds,teams:e.teams.teamList}},function(e){return{removeTeam:function(t,n){return e(O(t,n,!1))},removeQuestionFromQueue:function(t,n){return e(function(e,t){return function(n){fetch("".concat(h.API_URL,"/room/").concat(e,"/round/question/").concat(t),{method:"DELETE",credentials:"include"}).then(function(){var e=Object(f.a)(p.a.mark(function e(t){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(r=e.sent,!t.ok){e.next=7;break}n((a=r,{type:j.setQuestions,questions:a})),e.next=8;break;case 7:throw new Error(r.error);case 8:case"end":return e.stop()}var a},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return n(M(e.message))})}}(t,n))}}})(re),oe=(n(42),function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(i.a)(t,[{key:"getSortedTeams",value:function(){return this.props.teams.slice().sort(function(e,t){return e.score>t.score?-1:e.score<t.score?1:0})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"Component EndRound"},a.a.createElement(H,null),a.a.createElement("main",null,a.a.createElement("h1",null,"End round ",this.props.currentRound),a.a.createElement("ul",null,this.getSortedTeams().map(function(e,t){return a.a.createElement("li",{key:t},a.a.createElement("span",{className:"position"},t+1,"."),a.a.createElement("span",null,e.teamName),a.a.createElement("span",{className:"score"},e.score," points"))})),a.a.createElement("button",{className:"bttn",onClick:function(){return e.props.setCategorySelectState(e.props.roomKey)}},"Start new round")))}}]),t}(a.a.Component));var ce=s.b(function(e){return{roomKey:e.room.roomKey,currentRound:e.rounds.rounds.length,teams:e.teams.teamList}},function(e){return{setCategorySelectState:function(t){return e(x(t))}}})(oe),se={activeView:G,wsAllowed:!1};var ue=n(13),ie={rounds:[],answerRevealed:!1};var le={categories:[],selectedCategories:[]};var me={roomKey:null,error:""};var Ee={teamList:[]};var de=U.c({views:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;switch((arguments.length>1?arguments[1]:void 0).type){case _.VIEW_LOGIN_SCREEN:return Object(q.a)({},e,{activeView:G,wsAllowed:!1});case _.VIEW_LOBBY_SCREEN:return Object(q.a)({},e,{activeView:z,wsAllowed:!0});case _.VIEW_CATEGORYSELECTION_SCREEN:return Object(q.a)({},e,{activeView:X,wsAllowed:!0});case _.VIEW_CPANEL_SCREEN:return Object(q.a)({},e,{activeView:ae,wsAllowed:!0});case _.VIEW_END_ROUND_SCREEN:return Object(q.a)({},e,{activeView:ce,wsAllowed:!0});default:return e}},teams:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case v.SET_TEAMS:return Object(q.a)({},n,{teamList:r.teamList});case v.ACCEPT_TEAM:return e=n.teamList.findIndex(function(e){return e.sessionId===r.sessionId}),(t=n.teamList.slice())[e].accepted=!0,Object(q.a)({},n,{teamList:t});case v.REJECT_TEAM:return e=n.teamList.findIndex(function(e){return e.sessionId===r.sessionId}),(t=n.teamList.slice()).splice(e,1),Object(q.a)({},n,{teamList:t});case v.REMOVE_TEAMS:return Object(q.a)({},Ee);case v.ADD_ANSWER:var a=Object(ue.a)(n.teamList),o=a.findIndex(function(e){return e.sessionId===r.teamSessionId});return a[o].answers.push({questionId:r.questionId,answer:r.answer,correct:null}),Object(q.a)({},n,{teamList:a});default:return Object(q.a)({},n)}},rounds:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case j.setRounds:return Object(q.a)({},t,{rounds:n.rounds});case j.nextQuestion:return(e=Object(ue.a)(t.rounds))[e.length-1].activeQuestionIndex=n.activeQuestionIndex,Object(q.a)({},t,{rounds:e,answerRevealed:!1});case j.setQuestions:return(e=Object(ue.a)(t.rounds))[e.length-1].questions=n.questions,Object(q.a)({},t,{rounds:e});case j.revealAnswer:return Object(q.a)({},t,{answerRevealed:!0});default:return t}},questions:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case F.SET_CATEGORY:return Object(q.a)({},t,{categories:n.categories});case F.ADD_CATEGORY:return(e=t.selectedCategories.slice()).push(n.category),Object(q.a)({},t,{selectedCategories:e.slice()});case F.REMOVE_CATEGORY:return e=(e=t.selectedCategories.slice()).filter(function(e){return e!==n.category}),Object(q.a)({},t,{selectedCategories:e.slice()});case F.EMPTY_SELECTED_CATEGORIES:return Object(q.a)({},t,{selectedCategories:[]});default:return t}},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q.CREATE_ROOM:return Object(q.a)({},e,{roomKey:t.roomKey});case Q.LEAVE_ROOM:return Object(q.a)({},me);case Q.ADD_ERROR:return Object(q.a)({},e,{error:t.error});case Q.REMOVE_ERROR:return Object(q.a)({},e,{error:""});default:return e}}});n.d(t,"store",function(){return pe});var pe=Object(U.d)(de,Object(U.a)(P.a)),fe=a.a.createElement(s.a,{store:pe},a.a.createElement(K,null));pe.dispatch(function(e){fetch("".concat(h.API_URL,"/room/restore/ROLE_QUIZMASTER"),{method:"GET",credentials:"include"}).then(function(){var t=Object(f.a)(p.a.mark(function t(n){var r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:if(r=t.sent,!n.ok){t.next=11;break}e(b(r.teams)),e(D(r.roomKey)),e(L(r.rounds,r.currentQuestionIndex)),e(I(r.gameState)),e(C()),t.next=12;break;case 11:throw new Error(r.error);case 12:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){return console.log(e.message)})}),c.a.render(fe,document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.8a9fee8c.chunk.js.map